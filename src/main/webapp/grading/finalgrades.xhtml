<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:h5="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:p="http://primefaces.org/ui">
    <p:dialog header="#{msg['gradings.finalGrade.calculate']}" appendTo="@(body)" widgetVar="gradeCalculateFinal"
              modal="true">
        <h:form id="gradeCalculateFinalForm">
            <ui:include src="/WEB-INF/alerts.xhtml" />
            <h:panelGroup layout="block" styleClass="modal-body">
                #{msg['gradings.finalGrade.confirmation']}<br />
                <br />
                <strong>#{msg['common.attention']}:</strong>
                #{msg['gradings.finalGrade.hint']}<br />
                <br />

                <ui:repeat value="#{gradingController.course.participationTypes}"
                           var="type">
                    <h:panelGroup layout="block" styleClass="alert alert-warning"
                                  rendered="#{type.gradeFormula.formula.length() == 0}">
                        #{msg['gradings.finalGrade.missingFormula']}
                    </h:panelGroup>
                </ui:repeat>
            </h:panelGroup>
            <div class="modal-footer">
                <div class="btn-group">
                    <p:commandButton value="#{msg['common.cancel']}" type="button"
                                     onclick="return exModal(':gradeCalculateFinal');"
                                     styleClass="btn btn-default" />
                    <p:commandButton value="#{msg['gradings.finalGrade.calculate']}" type="button"
                                     styleClass="btn btn-primary">
                        <f:ajax listener="#{gradingInsertController.calculateFinalGrades(gradingController.course)}"
                                execute="@form"
                                render="gradeCalculateFinalForm"
                                />
                    </p:commandButton>
                </div>
            </div>
        </h:form>
    </p:dialog>
</ui:composition>