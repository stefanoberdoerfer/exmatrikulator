<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:h5="http://xmlns.jcp.org/jsf/passthrough"
  xmlns:pe="http://primefaces.org/ui/extensions">

  <pe:importConstants className="de.unibremen.opensores.util.Constants" var="EXcons" />

  <f:metadata>
    <f:viewParam name="id" value="#{newPasswordController.userId}" />
    <f:viewParam name="token" value="#{newPasswordController.tokenStr}" />
  </f:metadata>

  <h:head>
      <meta charset="utf-8" />
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta name="viewport" content="width=device-width, initial-scale=1" />

      <link rel="shortcut icon" type="image/x-icon"
            href="#{request.contextPath}/javax.faces.resource/favicon.ico.xhtml?ln=images" />
      <!-- other browsers -->
      <link rel="icon" type="image/x-icon"
            href="#{request.contextPath}/javax.faces.resource/favicon.ico.xhtml?ln=images" />

      <title>#{msg['common.newPassword']} Â· Exmatrikulator</title>

      <!-- Styles -->
      <h:outputStylesheet name="css/vendors.min.css"  />
      <h:outputStylesheet name="css/exmatrikulator.min.css"  />

      <!-- Interactivity -->
      <h:outputScript library="primefaces" name="jquery/jquery.js" />
      <h:outputScript name="js/exmatrikulator.min.js" />
  </h:head>

  <h:body id="login">
      <h:panelGroup layout="block" id="login-panel">
          <h:panelGroup layout="block" class="logo">
              <h:graphicImage library="images" name="el_toro_light.svg" class="logo-el-toro" />
              <h:panelGroup class="logo-label">Exmatrikulator</h:panelGroup>
          </h:panelGroup>

          <h:form class="form">
              <ui:include src="/WEB-INF/alerts.xhtml" />
            <p>#{msg['newPassword.description']}</p>

            <h:panelGroup layout="block" class="form-group">
                <h:outputLabel for="credentialPassword" value="#{msg['common.password']}" />
                <h:inputSecret type="password" class="form-control" id="credentialPassword" h5:autofocus="true"
                   required="true" requiredMessage="#{msg['registration.missingPassword']}"
                   value="#{newPasswordController.password}" validatorMessage="#{msg['registration.invalidPasswort']}" >
                  <f:validateLength minimum="#{EXcons.MIN_PASSWORD_LENGTH}" />
                </h:inputSecret>
            </h:panelGroup>

            <h:panelGroup layout="block" class="form-group">
                <h:outputLabel for="credentialPasswordConfirm" value="#{msg['common.passwordConfirm']}" />
                <h:inputSecret type="password" class="form-control" id="credentialPasswordConfirm"
                  required="true" requiredMessage="#{msg['registration.missingConformationPassword']}"
                  value="#{newPasswordController.passwordConfirmed}" />
            </h:panelGroup>

            <h:panelGroup layout="block" class="form-group text-center">
                <h:commandButton type="submit" class="btn btn-primary btn-block"
                  value="#{msg['newPassword.submit']}" action="#{newPasswordController.changePassword()}"/>
            </h:panelGroup>
          </h:form>
      </h:panelGroup>
  </h:body>
</html>
